---
title: Сети
theme: night
revealOptions:
  transition: 'fade'
---

# сети

Notes: Сегодня поговорим про сети в общих чертах.

- про модель OSI
- про стек TCP/IP
- про то, как ходят пакетики

Если вы уже шарите, то не факт, что здесь вы найдёте что-то очень полезное :)

---

# OSI

Open System Interconnection model

Notes: прежде чем переходить к деталям - поговорим об общих вещах на всякий случай

---

**это**  
...

---

модель  
**как сделать красиво**

Notes: эта модель описывает как должно строится взаимодействие открытых систем

---

**не** вещь, специфичная для этих наших интернетов

Notes: она описывает вообще все такие потенциальные взаимодействия. Её, при желании, можно натянуть даже на обычный разговор

---

**не** инструкция по реализации

Notes: модель эталонная, поэтому в нашем неэталонном мире нет никакой нужды её полностью реализовывать

---

**не** распределяет протоколы по уровням

Notes: Её придумали давненько - в 1978. С её точки зрения по уровням нужно делить не протоколы, а задачи. Поэтому с точки зрения OSI и реальных протоколов могут быть странные конструкции вида "протокол TCP находится одновременно на 4 и 5 уровнях модели OSI" или "MPLS это технология уровня 2.5 OSI"

---

**уровни**  
в контексте этих наших сетей

Notes: OSI, как каждый уважающий себя огр, состоит из слоёв. Их всего 7, быстренько вспомним их

---

1  
physical

---

переслать **бит** через среду передачи данных

Notes: этот уровень отвечает на вопрос: "Как нам передать биты через условный провод?"

---

2  
data link

---

переслать **фрейм** в рамках одного канала

Notes: данные проходят уже не через один провод, а перекладываются из одного в другой

- появляется нужда в адресации - в случае сетей это MAC адреса
- адрес - уникален в рамках канала
- как из полученных по проводу битов собрать упорядоченную последовательность данных?
- последовательность - ethernet frame

---

3  
network

---

переслать **пакет** между каналами

Notes: данные перекладываются между каналами

- опять нужна адресация - в случае сетей это IP
- адрес в идеале должен быть абсолютно уникален, но ох уж этот неидеальный мир

---

4  
transport

---

передача данных в рамках сессии приложений

Notes:

- как рассортировать всё это многообразие пакетов по загончикам, ничего не потеряв и не перепутав?
- тоже есть адресация - номера сессий (aka порт)
- как напихать в пакеты побольше, чтобы поменьше отправлять и принимать

---

5  
session

---

установка и управление **сессиями**

Notes:

- как установить сессию?
- как организовать передачу данных?
- TCP, к примеру, можно отнести и к 4 и к 5 уровням: он и сессии устанавливает, и управляет ими, и убеждается, что данные внутри сессии не перепутаны

---

6  
presentation

---

представить данные нужным способом для сессий

Notes: определяем нужную кодировку, синтаксис данных и вообще добиваемся того, чтобы на другом конце нас поняли

---

7  
application

---

всё остальное :)

Notes: то, ради чего мы всё это затеваем. Всеми нами известные протоколы типа http, ssh, dns

---

**TCP/IP**

Notes: теперь чуть ближе к реальности. Поговорим о стеке TCP/IP

---

```java
class TCP_IP implements OSI
```

Notes: TCP/IP - конкретный стек протоколов, грубо говоря имплементация модели OSI в рамках компьютерных сетей, не вдающаяся в низкоуровневые дебри

---

![collection](/img/networking/osi-tcpip.png)

Notes: У TCP/IP, как у его интерфейса, тоже есть слои. Однако, как видно, их не семь и некоторые из них объединяют несколько слоёв модели OSI

link layer делится на 2 подуровня:

- MAC (Media Access Control): отвечает за физическую отправку пакетов
- LLC (Logical Link Control): отвечает за формирование фреймов

---

```java
class TCP_IP implements OSI {
  Protocol[] applicationLayer() {
    return [HTTP, DNS, SMTP, SSH]
  }
  Protocol[] transportLayer() {
    return [TCP, UDP, QUIC]
  }
  Protocol[] internetLayer() {
    return [IP, ICMP]
  }
  Protocol[] linkLayer() {
    return [ARP]
  }
}
```

Notes: А какие протоколы располагаются на разных уровнях TCP/IP? Продолжая странную аналогию с кодом, вот несколько протоколов, раскиданных по уровням. Их на самом деле куда больше, указал те, что на слуху

---

<!-- .slide: data-background-image="./img/networking/samurai_ogre.jpg"  data-background-size="contain" data-background-opacity="0.1" -->

# путь пакета

Notes: Пакет, как настоящий орг-самурай, имеет слои, и путь. Разберём несколько примеров

---

# ICMP

---

<!-- .slide: data-background-image="./img/networking/icmp.png"  data-background-size="contain" -->

Notes:
Есть компьютер, свитч, роутер и сервер где-то во внешнем интернете  
Есть несколько типов адресации

- для людей - DNS имена
- для программ - порты
- для компьютеров - IP адреса
- для железок - MAC адреса

---

# ARP

---

<!-- .slide: data-background-image="./img/networking/arp.png"  data-background-size="contain" -->

---

# DNS

---

<!-- .slide: data-background-image="./img/networking/dns.png"  data-background-size="contain" -->

---

#### вопросики

tg: @wundor

<!-- .slide: data-background-image="./img/end.png"  data-background-size="contain" data-background-opacity="0.6" -->
