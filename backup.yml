---
- hosts: swarm
  tasks:
    - import_role:
        name: jenkins
        tasks_from: backup
  tags: jenkins

- hosts: swarm
  tasks:
    - import_role:
        name: paperless
        tasks_from: backup
  tags: paperless

- hosts: swarm
  tasks:
    - import_role:
        name: nextcloud
        tasks_from: backup
  tags: nextcloud

- hosts: swarm
  tasks:
    - import_role:
        name: tandoor
        tasks_from: backup
  tags: tandoor

- hosts: swarm
  tasks:
    - import_role:
        name: kanboard
        tasks_from: backup
  tags: kanboard

- hosts: swarm
  tasks:
    - import_role:
        name: etherpad
        tasks_from: backup
  tags: etherpad

- hosts: swarm
  tasks:
    - import_role:
        name: rpgbasement
        tasks_from: backup
  tags: rpgbasement

- hosts: swarm
  tasks:
    - import_role:
        name: ttrss
        tasks_from: backup
  tags: ttrss

- hosts: swarm
  tasks:
    - import_role:
        name: authelia
        tasks_from: backup
  tags: authelia

- hosts: nas
  roles:
    - backup
  vars:
    service: files
    zfs:
      files: files
      photos: photos
    healthcheck_url: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      33386332376433633437336333383966323939386235343430636431336563393431666338653335
      3366353931646466383438353063323137373930343134350a336461333764646462383732376331
      32306638383231373531393037353164663832353436666238383537313538663664376162353632
      3534343035356230640a656662326165326537363936626463626162616264313336643864633031
      34636133346232633639646537383431313038343434663063326164653731333463343830333634
      38323034646230323862393665336237663232653265383830313935306466613032343966313136
      363961363161396136393034623963373463
  tags: files

- hosts: nas
  roles:
    - backup
  vars:
    service: archive
    zfs:
      archive: archive
    healthcheck_url: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      33333233363330316439346664323264313233656238386531333962653138643632363436386661
      6465653531383965373566373066313630386337626534310a353534383434363066363863366433
      66653230366437306136303632353535323837353931393761326537626339613638356439633734
      3833363339303662620a613763663733323562383633383438643264643337653065353761626333
      39653534653965626137336464373463623932363639323034336434663130626466376137303939
      36653834636561616333663061343231633564386532643133363366356336396135643837663863
      623335303132336161666338616337383036
  tags: archive
